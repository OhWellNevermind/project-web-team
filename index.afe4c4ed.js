!function(){function e(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=o.parcelRequired7c6;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,o.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,o){n[e]=o},o.parcelRequired7c6=s),s("iE7OH").register(JSON.parse('{"EVgbq":"index.afe4c4ed.js","ee16w":"sprite.8ca286f5.svg","eICEL":"apple-read-logo.652b354e.png","2L4yx":"apple-read-logo@2x-1.15632d7d.png","i9pPv":"book-shop-logo.1d091ebd.png","7yZHS":"book-shop-logo@2x.1f77f032.png","2HnSn":"deafult-img.9168e021.jpg","h4tGU":"shopping_list.01ee604e.js"}'));var a=s("6JpON");const i={categoriesListWrapper:document.querySelector(".js-categories-list"),allCategoriesItem:document.querySelector(".js-all-categories"),booksWrapperEl:document.querySelector(".js-books-wrapper"),booksTitleEl:document.querySelector(".js-books-title")};a=s("6JpON");const r="Coming soon";function l(e){return e.map((({book_image:e,title:o,author:t,_id:n})=>`<li class="home__books-item">\n      <img class="home__books-img" src="${e||defoultImg}" alt="${o||r}" />\n      <h3 class="home__books-title">${o||r}</h3>\n      <p class="home__books-author">${t||r}</p>\n      <p style="display:none" class="book-id">${n}</p>\n    </li>`)).join("")}const c="https://books-backend.p.goit.global/books/";async function d(){e(a).Loading.pulse();try{i.booksWrapperEl.innerHTML="",i.booksTitleEl.textContent="Best sellers book";const o=await fetch(`${c}top-books `);if(!o.ok)throw new Error(o.statusText);const t=await o.json();i.booksWrapperEl.innerHTML=t.map((e=>`<li class="home__books-all-wrapper">\n      <p class="home__books-all-category">${e.list_name}</p>\n      <ul class="home__books-all-items">\n        ${l(e.books)}\n      </ul>\n      <button class="home__books-all-btn" type="button">\n        See more\n      </button>\n    </li>`)).join(""),e(a).Loading.remove()}catch(o){e(a).Loading.remove(),e(a).Notify.failure("Somesing was wrong! Please restart page!"),console.log(o)}}async function p(o){e(a).Loading.pulse(),i.booksTitleEl.textContent=o,i.booksWrapperEl.innerHTML="";try{const t=await fetch(`${c}category?category=${o}`);if(!t.ok)throw new Error(t.statusText);i.booksWrapperEl.innerHTML=l(booksOfSelectegCategory),e(a).Loading.remove()}catch(o){e(a).Loading.remove(),e(a).Notify.failure("Somesing was wrong! Please restart page!"),console.log(o)}}async function u(e){try{const o=await fetch(`${c}${e}`);if(!o.ok)throw new Error(o.statusText);return book=await o.json(),book}catch(e){}}var g={};g=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("ee16w");var m={};m=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("eICEL");s("aNJCr").getBundleURL("EVgbq"),s("iE7OH").resolve("2L4yx");var b={};b=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("i9pPv");s("aNJCr").getBundleURL("EVgbq"),s("iE7OH").resolve("7yZHS");s("aNJCr").getBundleURL("EVgbq"),s("iE7OH").resolve("2HnSn");const h=document.querySelector(".js-popUp"),v=document.querySelector(".js-backdrop-pop"),k=JSON.parse(localStorage.getItem("book-anotation"))||[];let f=null,E=null,L=null,y=null,_=null,w={};function S(e){"Escape"===e.key&&(document.body.style.overflow="",v.classList.add("pop-up-is-hidden"),E.removeEventListener("click",H),L.removeEventListener("click",x),y.removeEventListener("click",H),_.removeEventListener("click",x))}function H(e){E.classList.add("pop-up-is-hidden"),L.classList.remove("pop-up-is-hidden"),k.push(w),localStorage.setItem("book-anotation",JSON.stringify(k))}function x(e){L.classList.add("pop-up-is-hidden"),E.classList.remove("pop-up-is-hidden"),JSON.parse(localStorage.getItem("book-anotation")).forEach(((e,o)=>{e._id===w._id&&(k.splice(o,1),localStorage.setItem("book-anotation",JSON.stringify(k)))}))}function j(e){"BUTTON"==e.target.nodeName&&(document.body.style.overflow="",v.classList.add("pop-up-is-hidden"),window.removeEventListener("keydown",j,!0),f.removeEventListener("click",j),v.removeEventListener("click",j),E.removeEventListener("click",H),L.removeEventListener("click",x))}i.booksWrapperEl.addEventListener("click",(async function(o){if("IMG"!=o.target.nodeName)return;document.body.style.overflow="hidden";const t=o.target.parentElement.querySelector(".book-id").textContent;await u(t),await u(t).then((e=>{w=e})),function(o){const{author:t,buy_links:n,description:s,book_image:a,title:i,_id:r}=o,l="Currently there is no description! Please come and check later;)",c=n[0].url,d=n[1].url,p=n[2].url;let u=`<button class="close-btn-modal js-btn-close-modal">\n      <svg class="close-btn-modal-icon" width="24" height="24">\n        <use href="${e(g)}#close-icon"></use>\n      </svg>\n    </button>\n    <div class="title-author-discrp">\n      <img\n        class="img-book"\n        src="${a}"\n        alt="poster book"\n      />\n      <div class="wrap-anotations">\n        <h2 class="title-book-pop-up">${i||l}</h2>\n        <p class="author">${t||l}</p>\n        <p class="discrition-book">\n         ${s||l}\n        </p>\n        <ul class="resource-shoping">\n          <li>\n            <a href="${c}" class="icon-wraper" target="_blank">\n              <svg class="amazon-icon">\n                <use href="${e(g)}#amazon-logo"></use>\n              </svg>\n            </a>\n          </li>\n          <li>\n            <a href="${d}" class="icon-wraper" target="_blank">\n              <img\n                class="img-shop-icon"\n                src="${e(m)}"\n                alt="apple"\n              />\n            </a>\n          </li>\n          <li>\n            <a href="${p}" class="icon-wraper" target="_blank">\n              <img\n                class="img-shop-icon"\n                src="${e(b)}"\n                alt="apple"\n              />\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="wraper">\n      <button class="btn-add-shop-list js-add" type="button">\n        add to shopping\n      </button>\n\n      <div class="wraper-remove js-wraper-remove pop-up-is-hidden">\n      <button class="btn-add-shop-list btn-remove js-remove  " type="button">\n        remove from the shopping list\n      </button>\n\n      <p class="msg-add-shoplist js-remove " >\n        Ð¡ongratulations! You have added the book to the shopping list. To\n        delete, press the button "Remove from the shopping list".\n      </p>\n      </div>\n      </div>\n    </div>`;h.innerHTML=u,v.classList.remove("pop-up-is-hidden"),v.addEventListener("click",j),f=document.querySelector(".js-btn-close-modal"),E=document.querySelector(".js-add"),L=document.querySelector(".js-wraper-remove"),f.addEventListener("click",j,!0,{once:!0}),window.addEventListener("keydown",S,{once:!0}),E.addEventListener("click",H),L.addEventListener("click",x),y=document.querySelector(".js-add"),_=document.querySelector(".js-remove"),function(e){const o=localStorage.getItem("book-anotation");JSON.parse(o).forEach((o=>{o._id===e&&(E.classList.add("pop-up-is-hidden"),L.classList.remove("pop-up-is-hidden"))}))}(r)}(w)})),e(a).Loading.init({className:"notiflix-loading",zindex:4e3,backgroundColor:"rgba(0,0,0,0.8)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:400,clickToClose:!1,customSvgUrl:null,customSvgCode:null,svgSize:"80px",svgColor:"var(--all-categories-active)",messageID:"NotiflixLoadingMessage",messageFontSize:"15px",messageMaxLength:34,messageColor:"#dcdcdc"}),e(a).Loading.pulse(),i.categoriesListWrapper.addEventListener("click",(function(e){if("LI"!=e.target.nodeName)return;const o=e.target.textContent.trim();$(e.target),"All categories"===o?d():p(o)})),i.booksWrapperEl.addEventListener("click",(function(e){if("button"!=e.target.type)return;let o=e.target.parentElement.querySelector(".home__books-all-category").textContent;p(o);const t=[...i.categoriesListWrapper.children];$(t.find((e=>e.textContent===o)))}));let C=i.allCategoriesItem;function $(e){C.classList.remove("home__categories-item-active"),e.classList.add("home__categories-item-active"),C=e}!async function(){try{const e=await fetch(`${c}category-list`);if(!e.ok)throw new Error(e.statusText);const o=await e.json();i.categoriesListWrapper.insertAdjacentHTML("beforeend",o.map((e=>`<li class="home__categories-item">${e.list_name}</li>`)).join(""))}catch(e){i.categoriesListWrapper.innerHTML='<h2 class="home__books-all-category">Sorry, but there is no categories</h2>',console.log(e)}}(),d(),s("dgrxZ"),s("4XPGW"),s("i8Q71"),s("gfpbd"),s("5xtVg")}();
//# sourceMappingURL=index.afe4c4ed.js.map
