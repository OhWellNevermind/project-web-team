{"mappings":"AAAA,MAEMA,EAAwBC,SAASC,cAAe,uBAChDC,EAAoBF,SAASC,cAAc,sBAC3CE,EAAiBH,SAASC,cAAe,qBACzCG,EAAeJ,SAASC,cAAe,mBAE7CC,EAAkBG,iBAAkB,QAASC,GAC7CP,EAAsBM,iBAAiB,SAgCvC,SAA8BE,GAC5B,GAA6B,MAAzBA,EAAMC,OAAOC,SACf,OAEF,MAAMC,EAAWH,EAAMC,OAAOG,UACb,mBAAbD,GACFJ,IAEFM,EAAeL,EAAMC,QACrBK,EAAoBH,E,IAvCtB,IAAII,EAAkBZ,EA0CtBa,eAAeT,IACb,IACE,MAAMU,QAAiBC,MAAM,wDAC7B,IAAKD,EAASE,GACZ,MAAM,IAAIC,MAAMH,EAASI,YAE3B,MAAMC,QAAiBL,EAASM,OAChClB,EAAamB,YAAc,oBAC3BpB,EAAeQ,UAAiCU,EAmBrCG,KAAKd,GAChB,mFACwCA,EAASe,oEAE3CC,EAA2BhB,EAASiB,gIAOzCC,KAAK,IA7Bc5B,SAAS6B,iBAAiB,4BAClCC,SAAQC,IAClBA,EAAK1B,iBAAiB,QAAS2B,EAAgB,G,CAEjD,MAAQC,GACRC,QAAQC,IAAIF,E,EA2BhB,SAASP,EAA2BU,GAClC,OAAOA,EACJZ,KACC,EAACa,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,KACpB,0EACkCF,WAAoBC,8CACxBA,+CACAC,qBAGjCX,KAAK,G,CAGVb,eAAeF,EAAqBH,GAClCN,EAAamB,YAAcb,EAC3BP,EAAeQ,UAAY,GAC3B,IACE,MAAMK,QAAiBC,MAAM,+DAAiCP,KAC9D,IAAKM,EAASE,GACZ,MAAM,IAAIC,MAAMH,EAASI,YAE3B,MAAMoB,QAAgCxB,EAASM,OAC/CnB,EAAeQ,UAAYe,EACzBc,E,CAEF,MAAOP,GACPC,QAAQC,IAAIF,E,EAIhB,SAASrB,EAAgBJ,GACvBM,EAAgB2B,UAAUC,OAAQ,gCAClClC,EAAOiC,UAAUE,IAAK,gCACtB7B,EAAkBN,C,CAGpB,SAASwB,EAAiBzB,GACxB,GAA0B,UAArBA,EAAMC,OAAOoC,KAChB,OAEA,IAAIC,EAAetC,EAAMuC,cAAcC,SAAS,GAAGxB,YACnDV,EAAqBgC,GAGrBjC,EAFwB,IAAIb,EAAsBgD,UACnBC,MAAMC,GAAWA,EAAQ1B,cAAgBsB,I,EA7G5E9B,iBACE,IACE,MAAMC,QAAiBC,MAAM,2DAC7B,IAAKD,EAASE,GACZ,MAAM,IAAIC,MAAMH,EAASI,YAE3B,MAAM8B,QAAkBlC,EAASM,OACjCvB,EAAsBoD,mBAAoB,YAA4CD,EAsCrF1B,KACCyB,GAAW,qCAAqCA,EAAQxB,mBAEzDG,KAAK,I,CAxCN,MAAQK,GACRC,QAAQC,IAAIF,E,EAxBhBmB,GACA9C","sources":["src/js/categories.js"],"sourcesContent":["const BASIC_URL = 'https://books-backend.p.goit.global/books/';\n\nconst categoriesListWrapper = document.querySelector( '.js-categories-list' );\nconst allCategoriesItem = document.querySelector('.js-all-categories') \nconst booksWrapperEl = document.querySelector( '.js-books-wrapper' );\nconst booksTitleEl = document.querySelector( '.js-books-title' );\n\nallCategoriesItem.addEventListener( 'click', getTopBooks );\ncategoriesListWrapper.addEventListener('click', handleCategoryClick);\n\nlet currentCategory = allCategoriesItem;\n\ngetAllCategories();\ngetTopBooks();\n\nfunction handleCategoryClick(event) {\n  if (event.target.nodeName != 'LI') {\n    return;\n  }\n  const category = event.target.innerHTML;\n  if (category === 'All categories') {\n    getTopBooks();\n  }\n  addActiveClass(event.target);\n  getSelectedCategory(category);\n}\n\nasync function getAllCategories() {\n  try {\n    const response = await fetch(`${BASIC_URL}category-list`);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    const countries = await response.json();\n    categoriesListWrapper.insertAdjacentHTML( 'beforeend', createAllCategoriesListMarkup( countries ) );\n  } catch ( err ) {\n    console.log(err);\n  }\n}\n\nfunction handleCategoryClick( event ) {\n  if (event.target.nodeName != 'LI') {\n    return;\n  }\n  const category = event.target.innerHTML;\n  if (category === 'All categories') {\n    getTopBooks();\n  }\n  addActiveClass(event.target);\n  getSelectedCategory(category);\n}\n\nasync function getTopBooks() {\n  try {\n    const response = await fetch(`${BASIC_URL}top-books `);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    const topBooks = await response.json();\n    booksTitleEl.textContent = 'Best sellers book';\n    booksWrapperEl.innerHTML = createAllBooksMarkup(topBooks);\n    const topBooksBtn = document.querySelectorAll('.home__books-all-wrapper');\n    topBooksBtn.forEach(item => {\n      item.addEventListener('click', topBooksSeeMore);\n    });\n  } catch ( err ) {\n    console.log(err);\n  }\n}\n\nfunction createAllCategoriesListMarkup(array) {\n  return array\n    .map(\n      element => `<li class=\"home__categories-item\">${element.list_name}</li>`\n    )\n    .join('');\n}\n\nfunction createAllBooksMarkup( array ) {\n  return array.map( category => \n    `<li class=\"home__books-all-wrapper\">\n      <p class=\"home__books-all-category\">${category.list_name}</p>\n      <ul class=\"home__books-all-items\">\n        ${createSelectCategoryMarkup(category.books)}\n      </ul>\n      <button class=\"home__books-all-btn\" type=\"button\">\n        See more\n      </button>\n    </li>`\n    )\n    .join('');\n}\n\nfunction createSelectCategoryMarkup(array) {\n  return array\n    .map(\n      ({ book_image, title, author }) =>\n        `<li class=\"home__books-item\">\n      <img class=\"home__books-img\" src=\"${book_image}\" alt=\"${title}\" />\n      <h3 class=\"home__books-title\">${title}</h3>\n      <p class=\"home__books-author\">${author}</p>\n    </li>`\n    )\n    .join('');\n}\n\nasync function getSelectedCategory( category ) {\n  booksTitleEl.textContent = category;\n  booksWrapperEl.innerHTML = '';\n  try {\n    const response = await fetch(`${BASIC_URL}category?category=${category}`);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    const booksOfSelectegCategory = await response.json();\n    booksWrapperEl.innerHTML = createSelectCategoryMarkup(\n      booksOfSelectegCategory\n    );\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction addActiveClass( target ) {\n  currentCategory.classList.remove( 'home__categories-item-active' );\n  target.classList.add( 'home__categories-item-active' );\n  currentCategory = target;\n}\n\nfunction topBooksSeeMore( event ) {\n  if ( event.target.type != \"button\" ) {\n    return;\n  }\n    let categoryName = event.currentTarget.children[0].textContent;\n    getSelectedCategory( categoryName );\n    const categoriesArray = [...categoriesListWrapper.children];\n    const target = categoriesArray.find( element => element.textContent === categoryName );\n    addActiveClass( target );\n}\n"],"names":["$f3b06000f9b46fbb$var$categoriesListWrapper","document","querySelector","$f3b06000f9b46fbb$var$allCategoriesItem","$f3b06000f9b46fbb$var$booksWrapperEl","$f3b06000f9b46fbb$var$booksTitleEl","addEventListener","$f3b06000f9b46fbb$var$getTopBooks","event","target","nodeName","category","innerHTML","$f3b06000f9b46fbb$var$addActiveClass","$f3b06000f9b46fbb$var$getSelectedCategory","$f3b06000f9b46fbb$var$currentCategory","async","response","fetch","ok","Error","statusText","topBooks","json","textContent","map","list_name","$f3b06000f9b46fbb$var$createSelectCategoryMarkup","books","join","querySelectorAll","forEach","item","$f3b06000f9b46fbb$var$topBooksSeeMore","err","console","log","array","book_image","title","author","booksOfSelectegCategory","classList","remove","add","type","categoryName","currentTarget","children","find","element","countries","insertAdjacentHTML","$f3b06000f9b46fbb$var$getAllCategories"],"version":3,"file":"index.bd8e0998.js.map"}