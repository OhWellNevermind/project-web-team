function e(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=o.parcelRequired7c6;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var s={id:e,exports:{}};return t[e]=s,o.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,o){n[e]=o},o.parcelRequired7c6=s),s("kyEFX").register(JSON.parse('{"5ZPII":"index.3dcfe099.js","lp5u4":"sprite.8ca286f5.svg","iWQIE":"apple-read-logo.652b354e.png","894cL":"apple-read-logo@2x-1.15632d7d.png","fz8Fl":"book-shop-logo.1d091ebd.png","2CP9g":"book-shop-logo@2x.1f77f032.png","gXHCa":"deafult-img.9168e021.jpg","ayx2C":"shopping_list.9de652eb.js"}'));var a=s("7Y9D8");const r={categoriesListWrapper:document.querySelector(".js-categories-list"),allCategoriesItem:document.querySelector(".js-all-categories"),booksWrapperEl:document.querySelector(".js-books-wrapper"),booksTitleEl:document.querySelector(".js-books-title")};a=s("7Y9D8");const i="Coming soon";function l(e){return e.map((({book_image:e,title:o,author:t,_id:n})=>`<li class="home__books-item">\n      <img class="home__books-img" src="${e||defoultImg}" alt="${o||i}" />\n      <h3 class="home__books-title">${o||i}</h3>\n      <p class="home__books-author">${t||i}</p>\n      <p style="display:none" class="book-id">${n}</p>\n    </li>`)).join("")}const c="https://books-backend.p.goit.global/books/";async function d(){e(a).Loading.pulse();try{r.booksWrapperEl.innerHTML="",r.booksTitleEl.textContent="Best sellers book";const o=await fetch(`${c}top-books `);if(!o.ok)throw new Error(o.statusText);const t=await o.json();r.booksWrapperEl.innerHTML=t.map((e=>`<li class="home__books-all-wrapper">\n      <p class="home__books-all-category">${e.list_name}</p>\n      <ul class="home__books-all-items">\n        ${l(e.books)}\n      </ul>\n      <button class="home__books-all-btn" type="button">\n        See more\n      </button>\n    </li>`)).join(""),e(a).Loading.remove()}catch(o){e(a).Loading.remove(),e(a).Notify.failure("Somesing was wrong! Please restart page!"),console.log(o)}}async function p(o){e(a).Loading.pulse(),r.booksTitleEl.textContent=o,r.booksWrapperEl.innerHTML="";try{const t=await fetch(`${c}category?category=${o}`);if(!t.ok)throw new Error(t.statusText);const n=await t.json();r.booksWrapperEl.innerHTML=l(n),e(a).Loading.remove()}catch(o){e(a).Loading.remove(),e(a).Notify.failure("Somesing was wrong! Please restart page!"),console.log(o)}}async function u(e){try{const o=await fetch(`${c}${e}`);if(!o.ok)throw new Error(o.statusText);return book=await o.json(),book}catch(e){}}var g={};g=new URL(s("kyEFX").resolve("lp5u4"),import.meta.url).toString();var m={};m=new URL(s("kyEFX").resolve("iWQIE"),import.meta.url).toString();new URL(s("kyEFX").resolve("894cL"),import.meta.url).toString();var b={};b=new URL(s("kyEFX").resolve("fz8Fl"),import.meta.url).toString();new URL(s("kyEFX").resolve("2CP9g"),import.meta.url).toString();new URL(s("kyEFX").resolve("gXHCa"),import.meta.url).toString();const h=document.querySelector(".js-popUp"),k=document.querySelector(".js-backdrop-pop"),v=JSON.parse(localStorage.getItem("book-anotation"))||[];let f=null,y=null,L=null,_=null,E=null,w={};function S(e){"Escape"===e.key&&(document.body.style.overflow="",k.classList.add("pop-up-is-hidden"),y.removeEventListener("click",j),L.removeEventListener("click",x),_.removeEventListener("click",j),E.removeEventListener("click",x))}function j(e){y.classList.add("pop-up-is-hidden"),L.classList.remove("pop-up-is-hidden"),v.push(w),localStorage.setItem("book-anotation",JSON.stringify(v))}function x(e){L.classList.add("pop-up-is-hidden"),y.classList.remove("pop-up-is-hidden"),JSON.parse(localStorage.getItem("book-anotation")).forEach(((e,o)=>{e._id===w._id&&(v.splice(o,1),localStorage.setItem("book-anotation",JSON.stringify(v)))}))}function H(e){"BUTTON"==e.target.nodeName&&e.target.classList.contains("close-btn-modal-icon")&&(document.body.style.overflow="",k.classList.add("pop-up-is-hidden"),window.removeEventListener("keydown",H,!0),f.removeEventListener("click",H),k.removeEventListener("click",H),y.removeEventListener("click",j),L.removeEventListener("click",x))}r.booksWrapperEl.addEventListener("click",(async function(o){if("IMG"!=o.target.nodeName)return;document.body.style.overflow="hidden";const t=o.target.parentElement.querySelector(".book-id").textContent;await u(t),await u(t).then((e=>{w=e})),function(o={}){const{author:t="",buy_links:n="",description:s="",book_image:a="",title:r="",_id:i=""}=o,l="Currently there is no description! Please come and check later;)",c=n[0].url,d=n[1].url,p=n[2].url;let u=`<button class="close-btn-modal js-btn-close-modal">\n      <svg class="close-btn-modal-icon" width="24" height="24">\n        <use href="${e(g)}#close-icon"></use>\n      </svg>\n    </button>\n    <div class="title-author-discrp">\n      <img\n        class="img-book"\n        src="${a}"\n        alt="poster book"\n      />\n      <div class="wrap-anotations">\n        <h2 class="title-book-pop-up">${r||l}</h2>\n        <p class="author">${t||l}</p>\n        <p class="discrition-book">\n         ${s||l}\n        </p>\n        <ul class="resource-shoping">\n          <li>\n            <a href="${c}" class="icon-wraper" target="_blank">\n              <svg class="amazon-icon">\n                <use href="${e(g)}#amazon-logo"></use>\n              </svg>\n            </a>\n          </li>\n          <li>\n            <a href="${d}" class="icon-wraper" target="_blank">\n              <img\n                class="img-shop-icon"\n                src="${e(m)}"\n                alt="apple"\n              />\n            </a>\n          </li>\n          <li>\n            <a href="${p}" class="icon-wraper" target="_blank">\n              <img\n                class="img-shop-icon"\n                src="${e(b)}"\n                alt="apple"\n              />\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="wraper">\n      <button class="btn-add-shop-list js-add" type="button">\n        add to shopping\n      </button>\n\n      <div class="wraper-remove js-wraper-remove pop-up-is-hidden">\n      <button class="btn-add-shop-list btn-remove js-remove  " type="button">\n        remove from the shopping list\n      </button>\n\n      <p class="msg-add-shoplist js-remove " >\n        Ð¡ongratulations! You have added the book to the shopping list. To\n        delete, press the button "Remove from the shopping list".\n      </p>\n      </div>\n      </div>\n    </div>`;h.innerHTML=u,k.classList.remove("pop-up-is-hidden"),k.addEventListener("click",H),f=document.querySelector(".js-btn-close-modal"),y=document.querySelector(".js-add"),L=document.querySelector(".js-wraper-remove"),f.addEventListener("click",H,!0,{once:!0}),window.addEventListener("keydown",S,{once:!0}),y.addEventListener("click",j),L.addEventListener("click",x),_=document.querySelector(".js-add"),E=document.querySelector(".js-remove"),function(e){const o=localStorage.getItem("book-anotation");JSON.parse(o).forEach((o=>{o._id===e&&(y.classList.add("pop-up-is-hidden"),L.classList.remove("pop-up-is-hidden"))}))}(i)}(w)})),e(a).Loading.init({className:"notiflix-loading",zindex:4e3,backgroundColor:"rgba(0,0,0,0.8)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:400,clickToClose:!1,customSvgUrl:null,customSvgCode:null,svgSize:"80px",svgColor:"var(--all-categories-active)",messageID:"NotiflixLoadingMessage",messageFontSize:"15px",messageMaxLength:34,messageColor:"#dcdcdc"}),e(a).Loading.pulse(),r.categoriesListWrapper.addEventListener("click",(function(e){if("LI"!=e.target.nodeName)return;const o=e.target.textContent.trim();T(e.target),"All categories"===o?d():p(o)})),r.booksWrapperEl.addEventListener("click",(function(e){if("button"!=e.target.type)return;let o=e.target.parentElement.querySelector(".home__books-all-category").textContent;console.log(o),p(o);const t=[...r.categoriesListWrapper.children];T(t.find((e=>e.textContent===o)))}));let $=r.allCategoriesItem;function T(e){$.classList.remove("home__categories-item-active"),e.classList.add("home__categories-item-active"),$=e}!async function(){try{const e=await fetch(`${c}category-list`);if(!e.ok)throw new Error(e.statusText);const o=await e.json();r.categoriesListWrapper.insertAdjacentHTML("beforeend",o.map((e=>`<li class="home__categories-item">${e.list_name}</li>`)).join(""))}catch(e){r.categoriesListWrapper.innerHTML='<h2 class="home__books-all-category">Sorry, but there is no categories</h2>',console.log(e)}}(),d(),s("6WnMa"),s("lJVr2"),s("bUb57"),s("eMg8c"),s("bTcpz");
//# sourceMappingURL=index.3dcfe099.js.map
