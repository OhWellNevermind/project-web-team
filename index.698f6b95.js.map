{"mappings":"AAAA,MAEMA,EAAwBC,SAASC,cAAe,uBAChDC,EAAoBF,SAASC,cAAc,sBAC3CE,EAAiBH,SAASC,cAAe,qBACzCG,EAAeJ,SAASC,cAAe,mBAE7CC,EAAkBG,iBAAkB,QAASC,GAE7C,IAAIC,EAAkBL,EAmBtBM,eAAeF,IACb,IACE,MAAMG,QAAiBC,MAAO,wDAC5B,IAAMD,EAASE,GACb,MAAM,IAAIC,MAAMH,EAASI,YAE7B,MAAMC,QAAiBL,EAASM,OAChCX,EAAaY,YAAc,oBAC3Bb,EAAec,UAAkCH,EAYtCI,KAAKC,GAChB,mFACwCA,EAASC,oEAE3CC,EAA2BF,EAASG,gIAKlCC,KAAM,G,CApBd,MAAQC,GACRC,QAAQC,IAAIF,E,EAsBhB,SAASH,EAA4BM,GACnC,OAAOA,EAAMT,KAAK,EAAEU,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,KACzC,0EACwCF,WAAoBC,8CACxBA,+CACAC,qBAC1BP,KAAM,G,CAGlBf,eAAeuB,EAAgBC,GAC7B,IAAIC,EAAmBD,EAAME,OAAOlB,YAgBtC,IAAwBkB,IAfNF,EAAME,OAgBtB3B,EAAgB4B,UAAUC,OAAQ,gCAClCF,EAAOC,UAAUE,IAAK,gCACtB9B,EAAkB2B,EAjBlB9B,EAAaY,YAAciB,EAC3B9B,EAAec,UAAY,GAC3B,IACE,MAAMR,QAAiBC,MAAO,+DAAiCuB,KAC7D,IAAMxB,EAASE,GACb,MAAM,IAAIC,MAAMH,EAASI,YAE7B,MAAMyB,QAAgC7B,EAASM,OAC/CZ,EAAec,UAAYI,EAA4BiB,E,CACvD,MAAQd,GACRC,QAAQC,IAAIF,E,GApEhBhB,iBACE,IACE,MAAMC,QAAiBC,MAAO,2DAC5B,IAAMD,EAASE,GACb,MAAM,IAAIC,MAAMH,EAASI,YAE7B,MAAM0B,QAAkB9B,EAASM,OACjChB,EAAsByC,mBAAoB,YAA4CD,EAsB3ErB,KAAKuB,GAClB,qCAAqCA,EAAQrB,mBAAkBG,KAAM,KAtBnExB,EAAsBM,iBAAkB,QAAS0B,E,CACjD,MAAQP,GACRC,QAAQC,IAAIF,E,EAbhBkB,GACApC","sources":["src/js/categories.js"],"sourcesContent":["const BASIC_URL = 'https://books-backend.p.goit.global/books/';\n\nconst categoriesListWrapper = document.querySelector( '.js-categories-list' );\nconst allCategoriesItem = document.querySelector('.js-all-categories') \nconst booksWrapperEl = document.querySelector( '.js-books-wrapper' );\nconst booksTitleEl = document.querySelector( '.js-books-title' );\n\nallCategoriesItem.addEventListener( 'click', getTopBooks );\n\nlet currentCategoty = allCategoriesItem;\n\ngetAllCategories();\ngetTopBooks();\n\nasync function getAllCategories() {\n  try {\n    const response = await fetch( `${BASIC_URL}category-list` );\n      if ( !response.ok ) {\n        throw new Error(response.statusText)\n      }\n    const countries = await response.json();\n    categoriesListWrapper.insertAdjacentHTML( 'beforeend', createAllCategoriesListMarkup( countries ) );\n    categoriesListWrapper.addEventListener( 'click', changeCategory );\n  } catch ( err ) {\n    console.log(err);\n  } \n}\n\nasync function getTopBooks() {\n  try {\n    const response = await fetch( `${BASIC_URL}top-books ` );\n      if ( !response.ok ) {\n        throw new Error(response.statusText)\n      }\n    const topBooks = await response.json();\n    booksTitleEl.textContent = 'Best sellers book';\n    booksWrapperEl.innerHTML = createAllBooksMarkup( topBooks );\n  } catch ( err ) {\n    console.log(err);\n  } \n}\n\nfunction createAllCategoriesListMarkup( array ) {\n  return array.map( element =>\n  `<li class=\"home__categories-item\">${element.list_name}</li>`).join( '' );\n}\n\nfunction createAllBooksMarkup( array ) {\n  return array.map( category => \n    `<li class=\"home__books-all-wrapper\">\n      <p class=\"home__books-all-categoty\">${category.list_name}</p>\n      <ul class=\"home__books-all-items\">\n        ${createSelectCategoryMarkup(category.books)}\n      </ul>\n      <button class=\"home__books-all-btn\" type=\"button\">\n        See more\n      </button>\n    </li>`).join( '' );\n}\n\nfunction createSelectCategoryMarkup( array ) {\n  return array.map( ( { book_image, title, author} ) =>\n  `<li class=\"home__books-item\">\n      <img class=\"home__books-img\" src=\"${book_image}\" alt=\"${title}\" />\n      <h3 class=\"home__books-title\">${title}</h3>\n      <p class=\"home__books-author\">${author}</p>\n    </li>`).join( '' );\n}\n\nasync function changeCategory( event ) {\n  let selectedCategory = event.target.textContent;\n  addActiveClass( event.target );\n  booksTitleEl.textContent = selectedCategory;\n  booksWrapperEl.innerHTML = '';\n  try {\n    const response = await fetch( `${BASIC_URL}category?category=${selectedCategory}` );\n      if ( !response.ok ) {\n        throw new Error(response.statusText)\n    }\n    const booksOfSelectegCategory = await response.json();\n    booksWrapperEl.innerHTML = createSelectCategoryMarkup( booksOfSelectegCategory );\n  } catch ( err ) {\n    console.log(err);\n  } \n}\n\nfunction addActiveClass(target) {\n  currentCategoty.classList.remove( 'home__categories-item-active' );\n  target.classList.add( 'home__categories-item-active' );\n  currentCategoty = target;\n}\n\n\n\n\n\n\n"],"names":["$f3b06000f9b46fbb$var$categoriesListWrapper","document","querySelector","$f3b06000f9b46fbb$var$allCategoriesItem","$f3b06000f9b46fbb$var$booksWrapperEl","$f3b06000f9b46fbb$var$booksTitleEl","addEventListener","$f3b06000f9b46fbb$var$getTopBooks","$f3b06000f9b46fbb$var$currentCategoty","async","response","fetch","ok","Error","statusText","topBooks","json","textContent","innerHTML","map","category","list_name","$f3b06000f9b46fbb$var$createSelectCategoryMarkup","books","join","err","console","log","array","book_image","title","author","$f3b06000f9b46fbb$var$changeCategory","event","selectedCategory","target","classList","remove","add","booksOfSelectegCategory","countries","insertAdjacentHTML","element","$f3b06000f9b46fbb$var$getAllCategories"],"version":3,"file":"index.698f6b95.js.map"}