{"mappings":"AAAA,MAEMA,EAAwBC,SAASC,cAAc,uBAC/CC,EAAoBF,SAASC,cAAc,sBAC3CE,EAAiBH,SAASC,cAAc,qBACxCG,EAAeJ,SAASC,cAAc,mBAE5CC,EAAkBG,iBAAiB,QAASC,GAC5CP,EAAsBM,iBAAiB,SAoCvC,SAA6BE,GAC3B,GAA6B,MAAzBA,EAAMC,OAAOC,SACf,OAEF,MAAMC,EAAWH,EAAMC,OAAOG,UACb,mBAAbD,GACFJ,IAEFM,EAAeL,EAAMC,QACrBK,EAAoBH,E,IA5CtBP,EAAeE,iBAAiB,SA2HhC,SAAyBE,GACvB,GAAyB,UAArBA,EAAMC,OAAOM,KACf,OAEF,IAAIC,EAAeR,EAAMC,OAAOQ,cAAcf,cAC5C,6BACAgB,YACFJ,EAAoBE,GACpB,MAAMG,EAAkB,IAAInB,EAAsBoB,UAIlDP,EAHeM,EAAgBE,MAC7BC,GAAWA,EAAQJ,cAAgBF,I,IAnIvC,IAAIO,EAAkBpB,EA6CtBqB,eAAejB,IACb,IACE,MAAMkB,QAAiBC,MAAM,wDAC7B,IAAKD,EAASE,GACZ,MAAM,IAAIC,MAAMH,EAASI,YAE3B,MAAMC,QAAiBL,EAASM,OAChC1B,EAAaa,YAAc,oBAC3Bd,EAAeQ,UAAiCkB,EAiB/CE,KACCrB,GACE,mFACoCA,EAASsB,oEAE3CC,EAA2BvB,EAASwB,gIAOzCC,KAAK,IA5BcnC,SAASoC,iBAAiB,2B,CAC9C,MAAOC,GACPC,QAAQC,IAAIF,E,EA6BhB,SAASJ,EAA2BO,GAClC,OAAOA,EACJT,KACC,EAACU,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,KACpB,gFACwCF,WAAoBC,8CAC9BA,+CACAC,qBAGjCR,KAAK,G,CAGVZ,eAAeV,EAAoBH,GACjCN,EAAaa,YAAcP,EAC3BP,EAAeQ,UAAY,GAC3B,IACE,MAAMa,QAAiBC,MAAM,+DAAiCf,KAC9D,IAAKc,EAASE,GACZ,MAAM,IAAIC,MAAMH,EAASI,YAE3B,MAAMgB,QAAgCpB,EAASM,OAC/C3B,EAAeQ,UAAYsB,EACzBW,E,CAEF,MAAOP,GACPC,QAAQC,IAAIF,E,EAIhB,SAASzB,EAAeJ,GACtBc,EAAgBuB,UAAUC,OAAO,gCACjCtC,EAAOqC,UAAUE,IAAI,gCACrBzB,EAAkBd,C,EArGpBe,iBACE,IACE,MAAMC,QAAiBC,MAAM,2DAC7B,IAAKD,EAASE,GACZ,MAAM,IAAIC,MAAMH,EAASI,YAE3B,MAAMoB,QAAkBxB,EAASM,OACjC/B,EAAsBkD,mBACpB,YAC8BD,EAoC/BjB,KACCV,GAAW,qCAAqCA,EAAQW,mBAEzDG,KAAK,I,CArCN,MAAOE,GACPC,QAAQC,IAAIF,E,EA3BhBa,GACA5C","sources":["src/js/categories.js"],"sourcesContent":["const BASIC_URL = 'https://books-backend.p.goit.global/books/';\n\nconst categoriesListWrapper = document.querySelector('.js-categories-list');\nconst allCategoriesItem = document.querySelector('.js-all-categories');\nconst booksWrapperEl = document.querySelector('.js-books-wrapper');\nconst booksTitleEl = document.querySelector('.js-books-title');\n\nallCategoriesItem.addEventListener('click', getTopBooks);\ncategoriesListWrapper.addEventListener('click', handleCategoryClick);\nbooksWrapperEl.addEventListener('click', topBooksSeeMore);\n\nlet currentCategory = allCategoriesItem;\n\ngetAllCategories();\ngetTopBooks();\n\nfunction handleCategoryClick(event) {\n  if (event.target.nodeName != 'LI') {\n    return;\n  }\n  const category = event.target.innerHTML;\n  if (category === 'All categories') {\n    getTopBooks();\n  }\n  addActiveClass(event.target);\n  getSelectedCategory(category);\n}\n\nasync function getAllCategories() {\n  try {\n    const response = await fetch(`${BASIC_URL}category-list`);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    const countries = await response.json();\n    categoriesListWrapper.insertAdjacentHTML(\n      'beforeend',\n      createAllCategoriesListMarkup(countries)\n    );\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction handleCategoryClick(event) {\n  if (event.target.nodeName != 'LI') {\n    return;\n  }\n  const category = event.target.innerHTML;\n  if (category === 'All categories') {\n    getTopBooks();\n  }\n  addActiveClass(event.target);\n  getSelectedCategory(category);\n}\n\nasync function getTopBooks() {\n  try {\n    const response = await fetch(`${BASIC_URL}top-books `);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    const topBooks = await response.json();\n    booksTitleEl.textContent = 'Best sellers book';\n    booksWrapperEl.innerHTML = createAllBooksMarkup(topBooks);\n    const topBooksBtn = document.querySelectorAll('.home__books-all-wrapper');\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction createAllCategoriesListMarkup(array) {\n  return array\n    .map(\n      element => `<li class=\"home__categories-item\">${element.list_name}</li>`\n    )\n    .join('');\n}\n\nfunction createAllBooksMarkup(array) {\n  return array\n    .map(\n      category =>\n        `<li class=\"home__books-all-wrapper\">\n      <p class=\"home__books-all-category\">${category.list_name}</p>\n      <ul class=\"home__books-all-items\">\n        ${createSelectCategoryMarkup(category.books)}\n      </ul>\n      <button class=\"home__books-all-btn\" type=\"button\">\n        See more\n      </button>\n    </li>`\n    )\n    .join('');\n}\n\nfunction createSelectCategoryMarkup(array) {\n  return array\n    .map(\n      ({ book_image, title, author }) =>\n        `<li class=\"home__books-item\">\n      <img width class=\"home__books-img\" src=\"${book_image}\" alt=\"${title}\" />\n      <h3 class=\"home__books-title\">${title}</h3>\n      <p class=\"home__books-author\">${author}</p>\n    </li>`\n    )\n    .join('');\n}\n\nasync function getSelectedCategory(category) {\n  booksTitleEl.textContent = category;\n  booksWrapperEl.innerHTML = '';\n  try {\n    const response = await fetch(`${BASIC_URL}category?category=${category}`);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    const booksOfSelectegCategory = await response.json();\n    booksWrapperEl.innerHTML = createSelectCategoryMarkup(\n      booksOfSelectegCategory\n    );\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nfunction addActiveClass(target) {\n  currentCategory.classList.remove('home__categories-item-active');\n  target.classList.add('home__categories-item-active');\n  currentCategory = target;\n}\n\nfunction topBooksSeeMore(event) {\n  if (event.target.type != 'button') {\n    return;\n  }\n  let categoryName = event.target.parentElement.querySelector(\n    '.home__books-all-category'\n  ).textContent;\n  getSelectedCategory(categoryName);\n  const categoriesArray = [...categoriesListWrapper.children];\n  const target = categoriesArray.find(\n    element => element.textContent === categoryName\n  );\n  addActiveClass(target);\n}\n"],"names":["$f3b06000f9b46fbb$var$categoriesListWrapper","document","querySelector","$f3b06000f9b46fbb$var$allCategoriesItem","$f3b06000f9b46fbb$var$booksWrapperEl","$f3b06000f9b46fbb$var$booksTitleEl","addEventListener","$f3b06000f9b46fbb$var$getTopBooks","event","target","nodeName","category","innerHTML","$f3b06000f9b46fbb$var$addActiveClass","$f3b06000f9b46fbb$var$getSelectedCategory","type","categoryName","parentElement","textContent","categoriesArray","children","find","element","$f3b06000f9b46fbb$var$currentCategory","async","response","fetch","ok","Error","statusText","topBooks","json","map","list_name","$f3b06000f9b46fbb$var$createSelectCategoryMarkup","books","join","querySelectorAll","err","console","log","array","book_image","title","author","booksOfSelectegCategory","classList","remove","add","countries","insertAdjacentHTML","$f3b06000f9b46fbb$var$getAllCategories"],"version":3,"file":"index.ea3095c3.js.map"}